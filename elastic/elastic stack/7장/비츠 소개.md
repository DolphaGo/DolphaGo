- [비츠란?](#비츠란)
  - [비츠 소개](#비츠-소개)
---
# 비츠란?

- 비츠는 가볍고 사용하기 쉬운 데이터 수집기다.
- 고(Go) 프로그래밍 언어로 작성된 경량 프로그램이기에 로그 수집을 원하는 시스템에 큰 부담을 주지 않으며, 로그스태시, 엘라스틱서치와 연계해 다양한 시스템 이벤트를 수집할 수 있게 도와준다.
- 비츠는 수집한 데이터를 엘라스틱으로 실어 나르기 위해 최전방에 위치한 소프트웨어
- 엘라스틱에서 공식적으로 지원하는 파일비트(filebeat : 로그 파일 수집), 메트릭비트(metricbeat: 메트릭 수집), 패킷비트(packetbeat: 네트워크 데이터 수집), 윈로그비트(winlogbeat: 윈도우 이벤트 로그 수집), 오딧비트(auditbeat: 감사 데이터 수집), 하트비트(heartbeat: 가동 시간 모니터링 데이터 수집), 펑션비트(functionbeat: 서버리스 데이터 수집) 외에도 공동체에서 만든 카프카비트(kafkabeat: 카프카 토픽 데이터 수집), 엔진엑스비트(nginxbeat: 엔진엑스 상태 수집), MySQL 비트(MySQL 상태 수집) 등 상당히 많은 비트가 존재한다.
- 비츠는 온프레미스와 가상 머신뿐만 아니라 컨테이너와 쿠버네티스 환경에서도 사용이 가능하므로 전체 인프라스트럭처의 관측성을 높이기 위한 토대로도 볼 수 있다.
- 설정이 간편하고 별도의 데이터 가공을 위한 프로그래밍 작업이 필요하지 않으므로, 원하는 비트만 있으면 빠르게 데이터 수집이 가능하다.
- 특정 비트 내에서 모듈을 추가하는 방식으로 필요한 기능을 확장할 수 있다.


## 비츠 소개

- 비츠는 가벼운 프로그램을 지향하기 때문에 하나의 목적만을 수행한다.
- 그래서 비츠는 목적별로 다양한 비츠들이 존재한다.
- 또한 데이터를 수집하는 데 특화되어 있는데, 데이터를 수집하는 역할만 보면 로그스태시와 유사해보일 수 있으나 차이가 있다.
  - 로그스태시는 다양한 플러그인을 포함해 범용성이 높은 만큼 무겁게 움직이는 반면, 비츠는 범용성을 포기하고 특정 목적만 수행하도록 가볍게 구성되어 애플리케이션 성능에 영향을 미치지 않고 필요한 이벤트를 수집할 수 있다.
  - 그렇다고 이벤트 가공을 완전히 지원하지 않는 것도 아니므로, 간단한 수집이라면 로그스태시보다 비츠를 쓰는 것이 성능상 유리하다.
  - 하지만, 좀 더 전문적이고 범용적인 대량 이벤트 가공이 필요하다면 로그스태시가 더 적합하다.

![](/images/2022-04-18-02-43-42.png)
- 일반적으로 비츠에서 수집한 데이터는 엘라스틱서치로 바로 보내거나, 로그스태시를 거쳐 엘라스틱서치로 보낸다.
- 로그스태시를 거칠 경우 각 비트에서 발생된 다량의 이벤트들을 일괄적으로 가공하고 처리할 수 있다.
- 굳이 데이터 발생량이 많지 않거나, 복잡한 가공을 수행할 필요가 없다면 로그스태시를 거치지 않아도 무방하다.
- 성격에 따라 비츠 종류가 나뉘는데, 사용 방식은 비슷하나 설치 방법이나 용도가 조금씩 다르다.

> 비츠 종류

| 비트명       | 설명                                                                                                                                                                                                                                                                                   |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| filebeat     | 로그 파일을 실시간으로 읽어들여 전송한다. 로그스태시나 엘라스틱서치에 데이터 전달 시 부하 방지 기능을 지원한다. 가장 많이 사용되는 비츠다.                                                                                                                                             |
| heartbeat    | 서비스가 살아있는지 확인하고 모니터링한다. ping, http 서비스 체크 등 서비스 상태를 파악하기 위한 여러 방법들을 지원하며, 크론(cron) 스케줄 표현식을 기반으로 주기적으로 서비스 활성 여부를 판단한다.                                                                                   |
| metricbeat   | 운영체제를 포함하여 서비스로부터 주기적으로 통계 지표를 수집한다. 시스템의 CPU나 메모리 같은 정보나 데이터베이스, 프록시 같은 특정 서비스의 통계 데이터도 수집할 수 있다.                                                                                                              |
| packetbeat   | 네트워크 패킷 분석기로 네트워크 데이터를 수집한다. 트래픽, 응답 시간, 사용자 패턴 분석 같은 작업 등을 패킷비트를 이용해 할 수 있다.                                                                                                                                                    |
| auditbeat    | 리눅스의 시스템 보안 정보를 감사하는 auditid에서 생성하는 로그를 수집한다. 사용자가 사전에 정의한 규칙에 따르지 않는 로그들을 식별하여 계정 미준수나 보안 정책에 위배되는 동작을 식별할 수 있다.                                                                                       |
| journalbeat  | 리눅스 systemd 로 실행되는 서비스들에 대한 로그를 수집한다.                                                                                                                                                                                                                            |
| functionbeat | 클라우드의 서버리스 환경에서 사용할 수 있고, 아마존의 큐 데이터 등을 수집한다.                                                                                                                                                                                                         |
| winlogbeat   | 윈도우에서 발생하는 이벤트 로그를 수집한다.                                                                                                                                                                                                                                            |
| custom beats | 오픈소스 커뮤니티에서 만든 비츠다. [여기](https://www.elastic.co/guide/en/beats/libbeat/7.10/community-beats.html)에 다양한 비츠들을 확인할 수 있다. apachebeat, kafkabeat, nginxbeat 등 공식 지원하지 않더라도 유용한 비츠들이 이미 많아서 필요한 비츠를 찾아보고 활용하는 것도 좋다. |

- 비츠의 종류는 매우 많다. 설정은 약간의 차이만 있을 뿐이지 사용 방법은 대부분 비슷하다.