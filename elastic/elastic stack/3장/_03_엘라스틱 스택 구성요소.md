## 키바나 콘솔 사용법
![](/images/2022-03-03-13-42-52.png)

- 시스템 상태 확인
  - 가장 빠른 방법으로 cat API를 사용한다.
  - cat은 `compact and aligned text`의 약자로, 콘솔에서 시스템의 상태를 확인할 때 가독성을 높일 목적으로 만들어진 API다.
  - `GET _cat`을 요청하면 cat API가 지원하는 목록들을 확인해볼 수 있다.
  - ![](/images/2022-03-03-13-43-32.png)


- 클러스터 내부 인덱스 목록 확인하기
  - `GET _cat/indices?v`
  - ![](/images/2022-03-03-13-44-31.png)
  - `?` 기호 뒤에는 몇가지 파라미터를 사용할 수 있는데, **v 파라미터를 사용하면 컬럼의 이름(컬럼 헤더)을 확인할 수 있다.**
  - v외에도 s(정렬), h(헤더) 등의 파라미터를 사용할 수 있다.
  - 이는 `curl -X GET "localhost:9200/_cat/indices?v"` 와 동일하다.
  

- 샘플데이터 불러오기
![](/images/2022-03-03-13-50-36.png)

키바나의 홈 화면에서, **Try our sample data** 링크를 이용하자.

## 인덱스와 도큐먼트

- 인덱스 : 도큐먼트를 저장하는 논리적 구분자
- 도큐먼트 : 실제 데이터를 저장하는 단위

일반적으로 엘라스틱을 이용해 시스템을 개발하면, 하나의 프로젝트에서 하나의 클러스터를 생성한다. 그리고 클러스터 내부는 데이터 성격에 따라서 여러개의 인덱스를 생성한다. 인데스 내부에는 JSON 형태로 된 다수의 도큐먼트가 존재하고 도큐먼트는 복수의 필드들을 갖는다.

### 도큐먼트
- 도큐먼트란, **엘라스틱서치에서 데이터가 저장되는 기본 단위로, JSON 형태이며, 하나의 도큐먼트는 여러 필드와 값을 갖는다.**

예를들어 다음과 같은 데이터가 있다고 가정해보자.
name : DolphaGo
age: 30
gender: male

우리는 MySQL의 경우에 Create table member ( ~); 와 INSERT INTO member (name, age, gender) values ("DolphaGo", 30, "male") 과 같은 쿼리를 사용해서 데이터를 저장했을 것이다.

하지만 엘라스틱서치는 데이터를 Json 형태로 저장한다. 즉, 다음과 같다.
```json
{
    "name": "DolphaGo",
    "age": 25,
    "gender": "male"
}
```

아직 매핑을 배우지 않았지만, 엘라스틱서치의 매핑으로 필드들의 데이터 타입을 지정할 수 있는데, name, gender 필드는 텍스트타입, age 필드는 정수 필드로 매핑이 되었다.

| MySQL  | 엘라스틱서치 |
| ------ | ------------ |
| 테이블 | 인덱스       |
| 레코드 | 도큐먼트     |
| 컬럼   | 필드         |
| 스키마 | 매핑         |

엘라스틱 서치 7.x 이전 버전에는 타입이 존재했으나, 이제는 타입이 사라지면서 다음과 같은 비교는 맞지않게 된다.