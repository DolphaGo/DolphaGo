# 시각화(Visualize)

- Visualize 메뉴는 엘라스틱 서치에 저장된 데이터를 그래프나 표, 지도 등 다양한 타입으로 보여주는 역할을 한다.
- 라인, 바, 파이 차트부터 맵, 시계열 비주얼 빌더(Time Series Visual Builder, TSVB) 태그 클라우드 등 다양한 시각화 타입을 지원한다.
- 메뉴 사용이 어렵진 않지만, 엘라스틱서치의 aggregation을 알아야 이해하기 쉽다.

- 메트릭 집계 : 평균/최소/최대 같은 수량을 계산한다.
- 버킷집계 : 특정 기준에 맞춰 데이터를 분리한다. 서브 버킷을 생성할 수 있다.
- 파이프라인 집계 : 집계 결과를 입력으로 받아 다시 집계를 한다. 부모/형제 집계 유형이 있다.
  

시각화 타입은 대부분 메트릭 집계와 버킷집계를 쓰고, 복잡한 그래프는 파이프라인 집계를 이용한다.

- Kibana > Visualizations 에 들어가보자

![](/images/2022-04-29-01-55-22.png)

![](/images/2022-04-29-01-55-46.png)

- `E` 는 Experimental 이며, 아직 안정화가 덜 된 단계의 서비스라는 뜻이다.
- 현재 지원되는 타입이 맘에 들지 않으면 Vega를 이용해 직접 시각화할 수도 있다.
- 예제로 기본이 되는 Vertical Bar를 사용해보자.
- `kibana_sample_data_flight` 데이터를 시각화해보자.

![](/images/2022-04-29-01-57-16.png)

![](/images/2022-04-29-01-57-48.png)

![](/images/2022-04-29-02-00-19.png)

- Buckets> X 축을 선택한다.


> X축 버킷 집계 종류

- Date Histogram
  - 날짜/시간 데이터 타입을 가진 필드만 사용 가능.
  - 일정한 주기를 기준으로 버킷을 구분함
- Date Range
  - 날짜/시간 데이터 타입을 가진 필드만 사용 가능
  - 사용자가 임의 범위를 지정해 버킷을 구분함
- Filters
  - 필터 적용 가능
- Histogram
  - 일정한 주기를 기준으로 버킷을 구분함
- Ipv4 Range
  - ip 타입을 가진 필드만 사용 가능. ip 범위를 임의 지정해 버킷을 구분함
- Range
  - 사용자가 임의의 범위를 지정해 버킷을 구분함
- Significant Terms
  - 필드의 유니크한 값 중 통계적으로 의미 있는 용어를 기준으로 구분함
- Terms
  - 필드의 유니크한 값을 기준으로 구분함


실습에서는 Date Histogram을 선택해보자.
- 필드를 선택해야 하는데, timpstamp 라는 시간/날짜 필드가 있다.
- 이를 선택하고, 간격을 minute로 하고 update하자
![](/images/2022-04-29-02-03-57.png)

이와 같은 방식으로 나머지들도 실습은 각자 해보도록 하자 ^^