- [로그스태시 소개](#로그스태시-소개)
  - [로그스태시란?](#로그스태시란)
    - [로그스태시 특징](#로그스태시-특징)
# 로그스태시 소개

- 로그 스태시 : log(로그를) stash(저장한다)
  - 컴퓨터 시스템에서 로그란 시스템에서 일련의 동작 과정을 기록하는 것을 말함
    - 성능, 오류, 동작 과정 등의 중요한 정보를 담고 있다.
    - 로그란 일반적으로 시스템 동작의 모든 행위나 이벤를 기록하는데, 데이터가 중요해지는 빅데이터 시대에는 이런 로그 정보를 데이터 분석에 활용하기도 한다.
  - 하지만, 로그 형태는 표준화 되어 있지 않기에 로그 생상자는 제각각 다양한 형태의 로그가 있다.
  - 또한 로그는 반정형 데이터(완벽하게 일치하지는 않더라도 어느 정도 형태가 있는 데이터)이며, 세상의 모든 것이 로그가 될 수 있기 때문에 로그 형태를 강제할 방법도 없다.
- 결국, 로그를 수집하는 쪽에서 로그 형태를 분석하고 시스템에서 인식할 수 있도록 로그를 정제하는 작업이 필요한데, 로그 스태시가 이를 쉽고 편하게 할 수 있도록 지원한다.
- **어떤 형태의 로그에 대해서도 로그를 수집-가공-전송하는 일련의 과정을 간편하게 구현하기 위한 강력한 기능까지 제공**한다.


<br/>

## 로그스태시란?
- 플러그인 기반의 오픈소스 데이터 처리 파이프라인 도구
- 다소 복잡/귀찮은 데이터 전처리 과정을 별도의 애플리케이션 작성 없이 비교적 간단한 설정만으로 수행할 수 있음
- 데이터를 저장하기 전 사용자가 원하는 형태로 변경할 수 있는 강력한 기능을 제공한다.
- 또한 장애 대응 로직이나 성능 저하 요인을 쉽게 파악할 수 있는 모니터링 API, 간단한 조정으로 성능을 튜닝할 수 있는 파라미터들도 제공한다.
- 비츠, 로그스태시, 엘라스틱서치, 키바나를 이용해 데이터를 수집 - 변환 - 저장 - 시각화하는 서비스를 구성할 때 로그스태시는 데이터를 저장하기 전에 원하는 형태로 가공하는 역할을 한다.
- 로그 스태시는 비츠를 포함한 여러 소스 파일을 입력으로 받을 수 있고, 데이터를 수정/삭제/추가 하여 엘라스틱 서치나 다른 시스템으로 데이터를 전송할 수 있다.

### 로그스태시 특징
- **플러그인 기반**
  - 로그스태시의 파이프라인을 구성하는 각 요소들은 전부 플러그인 형태로 만들어져있다.
  - 기본으로 제공되는 플러그인 + 수많은 커뮤니티 플러그인
  - 정말 필요한 경우 비교적 간단한 코드로 전용 플로그인을 작성해 로그 스태시의 다른 모든 장점을 가져가면서 고유한 로직을 포함시킬 수도 있음
    - 이를 위해 플러그인 개발을 위한 프레임워크를 포함하고 있고, 플러그인을 관리할 수 있는 기능도 제공한다.


- **모든 형태의 데이터 처리**
  - 기본 제공되는 플러그인만으로도 대다수의 데이터 소스 형태인 JSON, XML 등 구조화된 텍스트 뿐만 아니라, 다양한 형태의 데이터를 입력받아 가공한 다음 저장 가능하다.
  - **특히 이벤트 데이터, 즉, 시간에 따라 발생하는 데이터를 처리하는 데 최적화되어 있다.**
  - 물론 관계형 데이터베이스에서 데이터를 마이그레이션하거나 엘라스틱서치에 이미 저장된 도큐먼트들을 리인덱싱하는 등 시간과 무관한 데이터를 처리하는 모든 작업에서도 유연하게 사용할 수 있다.

- **성능**
  - 자체적으로 내장되어있는 메모리, 파일 기반의 큐를 사용하므로 **처리 속도**와 **안정성**이 높다.
  - 인덱싱할 도큐먼트의 수와 용량을 종합적으로 고려해 **벌크 인덱싱**을 수행할 뿐 아니라, 파이프라인 배치 크기 조정을 통해 **파이프라인 배치 크기 조정을 통해 병목현상을 방지하고 성능을 최적화**할 수 있다.

- **안정성**
  - 엘라스틱서치의 장애 상황에 대응하기 위한 재시도 로직이나 오류가 발생한 도큐먼트를 따로 보관하는 데드 레터 큐(dead letter queue)를 내장하고 있다.
  - 파일 기반의 큐를 사용할 경우 뜻하지 않은 로그 스태시의 장애 상황에서도 도큐먼트 유실을 최소화할 수 있다.
