# 로그스태시 설치

- [설치 가이드, 7.10 버전](https://www.elastic.co/guide/en/logstash/7.10/installing-logstash.html)
- 로그 스태시는 엘라스틱서치, 키바나 설치와 다르게 JVM 먼저 설치해야 한다.
- 로그 스태시 버전을 elastic search 버전하고 맞추자.
- 저거 7.10 이니까 es가 7.10.2면 logstash도 7.10.2를 받아야 한다. (Readme에 쉽게 다운로드 받을 수 있는 경로를 적어놨다.)


## JDK 설치
- 이건 구글링해서 설치하시길..

### 로그스태시 다운로드

- 지금 최신이 8.x라서 특정 버전을 다운로드 받는 것은 [여기](https://www.elastic.co/kr/downloads/past-releases/logstash-7-10-0)서 하는게 제일 편함. 나는 교재 7.10.0 버전을 설치하려고 한다.

### 로그 스태시 실행
```sh
➜ ./logstash -e "input { stdin { } } output { stdout { } }"
```

- 로그 스태시를 실행하기 위해서는 **반드시 파이프라인 설정이 필요**하다.
- 일반적으로 파이프라인은 따로 설정 파일을 만들어서 기록하거나, config 폴더의 pipelines.yml에 기록하는데, -e 옵션을 사용하면 콘솔에서 직접 파이프라인을 설정할 수 있다.
- 위에 예시로 로그 스태시를 실행하는 shell은 운영체제의 표준 입력(stdin)으로 전달받은 메시지를 다시 표준 출력(stdout)으로 표시하는 것이다.
- 이 실행결과는 다음과 같다.
![](/images/2022-04-13-02-16-53.png)


- `--log.level error는 로그 중 error 레벨 미만의 로그는 감추는 설정이다.
- 로그스태시에 제공하는 로그 레벨은 다음과 같다.

| 로그 레벨 | 설명                                                           |
| --------- | -------------------------------------------------------------- |
| fatal     | 시스템 동작을 멈출 정도의 심각한 오류 발생시 나타나는 로그들   |
| error     | 시스템 동작을 멈추지는 않지만 오류가 발생할 때 나타나는 로그들 |
| warn      | 잠재적인 오류를 포함하는 경고성 로그들                         |
| info      | 진행 상황이나 상태 변경 등의 정보를 알기 위한 로그들           |
| debug     | 개발 과정에서 디버깅을 하기 위한 로그들                        |
| trace     | 시스템 진행 과정 추적을 위한 로그들                            |


- `--log.level error` 를 쓰고 나서의 실행이다.
![](/images/2022-04-15-23-10-42.png)
- `aaa`라고 표준 입력을 했을 때 모니터에 표준 출력 `aaa` 가 출력되는 것을 확인할 수 있다.
- Ctrl + C 를 누르면 로그스태시를 종료할 수 있다.
